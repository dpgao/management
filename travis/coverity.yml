notifications:
  email: false

sudo: false
dist: trusty

language: c
compiler: gcc

addons:
  apt:
    packages:
      - ca-certificates
      - libgpgme11-dev
      - libnotmuch-dev
      - libtokyocabinet-dev
      - libkyotocabinet-dev
      - libgdbm-dev
      - libdb-dev
      - liblmdb-dev
      - libqdbm-dev
      - libslang2-dev
      - libgnutls-dev
      - libssl-dev
      - libsasl2-dev
      - libgss-dev
      - xsltproc
      - lynx
      - docbook-simple
      - docbook-xsl
      - libxml2-utils
      - gettext
      - lua5.2
      - liblua5.2-dev
      - autopoint
  coverity_scan:
    project:
      name: "neomutt/neomutt"
      description: "Teaching an Old Dog New Tricks"
    notification_email: rich@flatcap.org
    build_command_prepend: "./configure $OPTS"
    build_command: "make"
    branch_pattern: coverity

git:
  depth: 3

env:
  matrix:
    - OPTS="--disable-doc --disable-nls --flock --gpgme --lua --notmuch --bdb --with-domain=example.com --gdbm --gnutls --gss --homespool --kyotocabinet --lmdb --mixmaster --qdbm --sasl --disable-ssl --tokyocabinet"

script:
  - if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then make ; fi

